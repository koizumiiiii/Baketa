<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Baketa.UI.ViewModels.Settings"
             xmlns:converters="using:Baketa.UI.Converters"
             mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="300"
             x:Class="Baketa.UI.Views.Settings.EngineSelectionControl"
             x:DataType="vm:EngineSelectionViewModel">

  <Design.DataContext>
    <vm:EngineSelectionViewModel />
  </Design.DataContext>

  <Border Classes="Card">
    <StackPanel Spacing="16">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <TextBlock Text="ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³é¸æŠž" 
                 FontWeight="SemiBold" 
                 FontSize="16" />

      <!-- ã‚¨ãƒ³ã‚¸ãƒ³é¸æŠžãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ -->
      <StackPanel Spacing="12">
        <!-- LocalOnly ã‚¨ãƒ³ã‚¸ãƒ³ -->
        <Border Classes="EngineOption">
          <RadioButton GroupName="TranslationEngine"
                       IsChecked="{Binding SelectedEngine, Converter={x:Static converters:EnumToBoolConverter.Instance}, ConverterParameter=LocalOnly}"
                       Command="{Binding SelectEngineCommand}"
                       CommandParameter="LocalOnly">
            <Grid ColumnDefinitions="Auto,*,Auto">
              <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
              <Border Classes="EngineIcon LocalOnly" Grid.Column="0">
                <TextBlock Text="ðŸ’»" FontSize="18" />
              </Border>

              <!-- æƒ…å ± -->
              <StackPanel Grid.Column="1" Spacing="4" Margin="12,0,0,0">
                <TextBlock Text="LocalOnly ã‚¨ãƒ³ã‚¸ãƒ³" 
                           FontWeight="Medium" 
                           FontSize="14" />
                <TextBlock Text="OPUS-MT â€¢ é«˜é€Ÿ â€¢ ç„¡æ–™ â€¢ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ"
                           FontSize="12"
                           Opacity="0.8" />
              </StackPanel>

              <!-- çŠ¶æ…‹ãƒãƒƒã‚¸ -->
              <Border Grid.Column="2" 
                      Classes="StatusBadge"
                      Classes.Healthy="{Binding LocalEngineStatus.IsHealthy}"
                      Classes.Error="{Binding !LocalEngineStatus.IsHealthy}">
                <TextBlock Text="{Binding LocalEngineStatus.IsHealthy, Converter={x:Static converters:BoolToStatusTextConverter.Instance}}"
                           FontSize="10"
                           FontWeight="Medium" />
              </Border>
            </Grid>
          </RadioButton>
        </Border>

        <!-- CloudOnly ã‚¨ãƒ³ã‚¸ãƒ³ -->
        <Border Classes="EngineOption">
          <RadioButton GroupName="TranslationEngine"
                       IsChecked="{Binding SelectedEngine, Converter={x:Static converters:EnumToBoolConverter.Instance}, ConverterParameter=CloudOnly}"
                       Command="{Binding SelectEngineCommand}"
                       CommandParameter="CloudOnly"
                       IsEnabled="{Binding IsCloudOnlyEnabled}">
            <Grid ColumnDefinitions="Auto,*,Auto">
              <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
              <Border Classes="EngineIcon CloudOnly" Grid.Column="0">
                <TextBlock Text="â˜ï¸" FontSize="18" />
              </Border>

              <!-- æƒ…å ± -->
              <StackPanel Grid.Column="1" Spacing="4" Margin="12,0,0,0">
                <TextBlock Text="CloudOnly ã‚¨ãƒ³ã‚¸ãƒ³" 
                           FontWeight="Medium" 
                           FontSize="14" />
                <TextBlock Text="Gemini API â€¢ é«˜å“è³ª â€¢ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ å¿…é ˆ"
                           FontSize="12"
                           Opacity="0.8" />
              </StackPanel>

              <!-- çŠ¶æ…‹ãƒãƒƒã‚¸ -->
              <Border Grid.Column="2" 
                      Classes="StatusBadge"
                      Classes.Healthy="{Binding CloudEngineStatus.IsHealthy}"
                      Classes.Warning="{Binding !CloudEngineStatus.IsHealthy}"
                      Classes.Disabled="{Binding !IsCloudOnlyEnabled}">
                <TextBlock FontSize="10" FontWeight="Medium">
                  <TextBlock.Text>
                    <MultiBinding Converter="{x:Static converters:CloudEngineStatusConverter.Instance}">
                      <Binding Path="IsCloudOnlyEnabled" />
                      <Binding Path="CloudEngineStatus.IsHealthy" />
                      <Binding Path="CloudEngineStatus.IsOnline" />
                    </MultiBinding>
                  </TextBlock.Text>
                </TextBlock>
              </Border>
            </Grid>
          </RadioButton>
        </Border>
      </StackPanel>

      <!-- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³æ¡ˆå†… -->
      <Border Classes="PremiumInfo" IsVisible="{Binding !IsCloudOnlyEnabled}">
        <Grid ColumnDefinitions="Auto,*,Auto">
          <TextBlock Grid.Column="0" 
                     Text="â„¹ï¸" 
                     FontSize="16" 
                     VerticalAlignment="Center" />
          <TextBlock Grid.Column="1" 
                     Text="CloudOnlyã‚¨ãƒ³ã‚¸ãƒ³ã¯ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ—ãƒ©ãƒ³ã§åˆ©ç”¨å¯èƒ½ã§ã™"
                     FontSize="12"
                     VerticalAlignment="Center"
                     Margin="8,0,0,0" />
          <Button Grid.Column="2"
                  Classes="Link"
                  Content="è©³ç´°"
                  Command="{Binding ShowPremiumInfoCommand}"
                  FontSize="12" />
        </Grid>
      </Border>

      <!-- é¸æŠžã•ã‚ŒãŸã‚¨ãƒ³ã‚¸ãƒ³ã®èª¬æ˜Ž -->
      <Border Classes="EngineDescription">
        <StackPanel Spacing="8">
          <TextBlock Text="é¸æŠžã—ãŸã‚¨ãƒ³ã‚¸ãƒ³ã«ã¤ã„ã¦" 
                     FontWeight="Medium" 
                     FontSize="13" />
          <TextBlock Text="{Binding SelectedEngineDescription}"
                     FontSize="12"
                     TextWrapping="Wrap"
                     LineHeight="1.4" />
        </StackPanel>
      </Border>

      <!-- è­¦å‘Šè¡¨ç¤º -->
      <Border Classes="WarningMessage" IsVisible="{Binding HasStatusWarning}">
        <Grid ColumnDefinitions="Auto,*">
          <TextBlock Grid.Column="0" 
                     Text="âš ï¸" 
                     FontSize="14" 
                     VerticalAlignment="Top" />
          <TextBlock Grid.Column="1" 
                     Text="{Binding StatusWarningMessage}"
                     FontSize="12"
                     TextWrapping="Wrap"
                     Margin="8,0,0,0" />
        </Grid>
      </Border>

      <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
      <Border Classes="LoadingIndicator" IsVisible="{Binding IsLoading}">
        <Grid ColumnDefinitions="Auto,*">
          <Border Grid.Column="0" Classes="Spinner" />
          <TextBlock Grid.Column="1" 
                     Text="ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆä¸­..."
                     FontSize="12"
                     VerticalAlignment="Center"
                     Margin="8,0,0,0" />
        </Grid>
      </Border>
    </StackPanel>
  </Border>

</UserControl>
