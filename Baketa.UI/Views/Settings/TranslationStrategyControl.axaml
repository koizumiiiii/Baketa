<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:Baketa.UI.ViewModels.Settings"
             xmlns:converters="using:Baketa.UI.Converters"
             mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="400"
             x:Class="Baketa.UI.Views.Settings.TranslationStrategyControl"
             x:DataType="vm:TranslationStrategyViewModel">

  <Design.DataContext>
    <vm:TranslationStrategyViewModel />
  </Design.DataContext>

  <Border Classes="Card">
    <StackPanel Spacing="16">
      <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
      <TextBlock Text="ç¿»è¨³æˆ¦ç•¥é¸æŠž" 
                 FontWeight="SemiBold" 
                 FontSize="16" />

      <!-- æˆ¦ç•¥é¸æŠž -->
      <StackPanel Spacing="12">
        <!-- Direct æˆ¦ç•¥ -->
        <Border Classes="StrategyOption">
          <RadioButton GroupName="TranslationStrategy"
                       IsChecked="{Binding SelectedStrategy, Converter={x:Static converters:EnumToBoolConverter.Instance}, ConverterParameter=Direct}"
                       Command="{Binding SelectStrategyCommand}"
                       CommandParameter="Direct">
            <Grid ColumnDefinitions="Auto,*,Auto">
              <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
              <Border Classes="StrategyIcon Direct" Grid.Column="0">
                <TextBlock Text="âš¡" FontSize="18" />
              </Border>

              <!-- æƒ…å ± -->
              <StackPanel Grid.Column="1" Spacing="4" Margin="12,0,0,0">
                <TextBlock Text="ç›´æŽ¥ç¿»è¨³ (Direct)" 
                           FontWeight="Medium" 
                           FontSize="14" />
                <TextBlock Text="å˜ä¸€ãƒ¢ãƒ‡ãƒ« â€¢ æœ€é«˜é€Ÿåº¦ â€¢ å…¨è¨€èªžãƒšã‚¢å¯¾å¿œ"
                           FontSize="12"
                           Opacity="0.8" />
                <TextBlock Text="æŽ¨å®šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 50msæœªæº€"
                           FontSize="11"
                           Opacity="0.6" />
              </StackPanel>

              <!-- è©³ç´°ãƒœã‚¿ãƒ³ -->
              <Button Grid.Column="2"
                      Classes="Icon Small"
                      Command="{Binding ShowStrategyDetailsCommand}"
                      CommandParameter="Direct"
                      ToolTip.Tip="è©³ç´°ã‚’è¡¨ç¤º">
                <TextBlock Text="â„¹ï¸" FontSize="12" />
              </Button>
            </Grid>
          </RadioButton>
        </Border>

        <!-- TwoStage æˆ¦ç•¥ -->
        <Border Classes="StrategyOption">
          <RadioButton GroupName="TranslationStrategy"
                       IsChecked="{Binding SelectedStrategy, Converter={x:Static converters:EnumToBoolConverter.Instance}, ConverterParameter=TwoStage}"
                       Command="{Binding SelectStrategyCommand}"
                       CommandParameter="TwoStage"
                       IsEnabled="{Binding IsTwoStageAvailable}">
            <Grid ColumnDefinitions="Auto,*,Auto">
              <!-- ã‚¢ã‚¤ã‚³ãƒ³ -->
              <Border Classes="StrategyIcon TwoStage" Grid.Column="0">
                <TextBlock Text="ðŸ”„" FontSize="18" />
              </Border>

              <!-- æƒ…å ± -->
              <StackPanel Grid.Column="1" Spacing="4" Margin="12,0,0,0">
                <TextBlock Text="2æ®µéšŽç¿»è¨³ (TwoStage)" 
                           FontWeight="Medium" 
                           FontSize="14" />
                <TextBlock Text="ä¸­ç¶™è¨€èªžçµŒç”± â€¢ é«˜å“è³ª â€¢ jaâ†’zhå°‚ç”¨"
                           FontSize="12"
                           Opacity="0.8" />
                <TextBlock Text="æŽ¨å®šãƒ¬ã‚¤ãƒ†ãƒ³ã‚·: 100msæœªæº€"
                           FontSize="11"
                           Opacity="0.6" />
              </StackPanel>

              <!-- è©³ç´°ãƒœã‚¿ãƒ³ -->
              <Button Grid.Column="2"
                      Classes="Icon Small"
                      Command="{Binding ShowStrategyDetailsCommand}"
                      CommandParameter="TwoStage"
                      ToolTip.Tip="è©³ç´°ã‚’è¡¨ç¤º">
                <TextBlock Text="â„¹ï¸" FontSize="12" />
              </Button>
            </Grid>
          </RadioButton>
        </Border>
      </StackPanel>

      <!-- 2æ®µéšŽç¿»è¨³åˆ©ç”¨ä¸å¯ã®èª¬æ˜Ž -->
      <Border Classes="InfoMessage" IsVisible="{Binding !IsTwoStageAvailable}">
        <Grid ColumnDefinitions="Auto,*">
          <TextBlock Grid.Column="0" 
                     Text="â„¹ï¸" 
                     FontSize="14" 
                     VerticalAlignment="Top" />
          <StackPanel Grid.Column="1" Spacing="4" Margin="8,0,0,0">
            <TextBlock Text="2æ®µéšŽç¿»è¨³ã«ã¤ã„ã¦"
                       FontWeight="Medium"
                       FontSize="12" />
            <TextBlock Text="2æ®µéšŽç¿»è¨³ã¯æ—¥æœ¬èªžâ†’ä¸­å›½èªžã®è¨€èªžãƒšã‚¢ã§ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™ã€‚ä»–ã®è¨€èªžãƒšã‚¢ã§ã¯ç›´æŽ¥ç¿»è¨³ã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚"
                       FontSize="11"
                       TextWrapping="Wrap"
                       LineHeight="1.4"
                       Opacity="0.8" />
          </StackPanel>
        </Grid>
      </Border>

      <!-- ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š -->
      <Border Classes="OptionGroup">
        <StackPanel Spacing="12">
          <TextBlock Text="ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­å®š" 
                     FontWeight="Medium" 
                     FontSize="13" />
          
          <CheckBox IsChecked="{Binding EnableFallback}"
                    Command="{Binding ToggleFallbackCommand}"
                    CommandParameter="{Binding !EnableFallback}">
            <StackPanel Spacing="4">
              <TextBlock Text="è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’æœ‰åŠ¹ã«ã™ã‚‹"
                         FontSize="12" />
              <TextBlock Text="ã‚¨ãƒ³ã‚¸ãƒ³ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã€è‡ªå‹•çš„ã«åˆ©ç”¨å¯èƒ½ãªã‚¨ãƒ³ã‚¸ãƒ³ã«åˆ‡ã‚Šæ›¿ãˆã¾ã™"
                         FontSize="11"
                         Opacity="0.7"
                         TextWrapping="Wrap" />
            </StackPanel>
          </CheckBox>
        </StackPanel>
      </Border>

      <!-- é¸æŠžã•ã‚ŒãŸæˆ¦ç•¥ã®èª¬æ˜Ž -->
      <Border Classes="StrategyDescription">
        <StackPanel Spacing="8">
          <TextBlock Text="é¸æŠžã—ãŸæˆ¦ç•¥ã«ã¤ã„ã¦" 
                     FontWeight="Medium" 
                     FontSize="13" />
          <TextBlock Text="{Binding SelectedStrategyDescription}"
                     FontSize="12"
                     TextWrapping="Wrap"
                     LineHeight="1.4" />
        </StackPanel>
      </Border>

      <!-- æˆ¦ç•¥è­¦å‘Š -->
      <Border Classes="WarningMessage" IsVisible="{Binding HasStrategyWarning}">
        <Grid ColumnDefinitions="Auto,*">
          <TextBlock Grid.Column="0" 
                     Text="âš ï¸" 
                     FontSize="14" 
                     VerticalAlignment="Top" />
          <TextBlock Grid.Column="1" 
                     Text="{Binding StrategyWarningMessage}"
                     FontSize="12"
                     TextWrapping="Wrap"
                     Margin="8,0,0,0" />
        </Grid>
      </Border>

      <!-- ãƒªã‚»ãƒƒãƒˆãƒœã‚¿ãƒ³ -->
      <Border Classes="ActionBar">
        <Button Classes="Secondary"
                Content="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™"
                Command="{Binding ResetToDefaultCommand}"
                HorizontalAlignment="Left"
                FontSize="12" />
      </Border>

      <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º -->
      <Border Classes="LoadingIndicator" IsVisible="{Binding IsLoading}">
        <Grid ColumnDefinitions="Auto,*">
          <Border Grid.Column="0" Classes="Spinner" />
          <TextBlock Grid.Column="1" 
                     Text="æˆ¦ç•¥ã‚’å¤‰æ›´ä¸­..."
                     FontSize="12"
                     VerticalAlignment="Center"
                     Margin="8,0,0,0" />
        </Grid>
      </Border>
    </StackPanel>
  </Border>

</UserControl>
