<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Baketa.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="using:Avalonia.Xaml.Interactivity"
        xmlns:behaviors="using:Baketa.UI.Behaviors"
        mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="350"
        x:Class="Baketa.UI.Views.LoadingWindow"
        x:DataType="vm:LoadingViewModel"
        Title="Baketa - Loading..."
        Width="500" Height="350"
        CanResize="False"
        WindowStartupLocation="CenterScreen"
        SystemDecorations="None"
        TransparencyLevelHint="Transparent"
        Background="Transparent">

  <Window.Styles>
    <Style Selector="Window">
      <Setter Property="Opacity" Value="0"/>
    </Style>
    <Style Selector="Window.loaded">
      <Style.Animations>
        <Animation Duration="0:0:0.3" FillMode="Forward">
          <KeyFrame Cue="100%">
            <Setter Property="Opacity" Value="1"/>
          </KeyFrame>
        </Animation>
      </Style.Animations>
    </Style>
  </Window.Styles>

  <Border CornerRadius="12"
          Background="#1E1E1E"
          BorderBrush="#3F3F46"
          BorderThickness="1">
    <!-- Issue #239: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ‰ãƒ©ãƒƒã‚°ç§»å‹•ã‚’æœ‰åŠ¹åŒ– -->
    <i:Interaction.Behaviors>
      <behaviors:WindowDragBehavior />
    </i:Interaction.Behaviors>

    <Grid RowDefinitions="Auto,Auto,*,Auto,Auto" Margin="40,32,40,24">

      <!-- Issue #239: é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ï¼ˆå³ä¸Šã«é…ç½®ï¼‰ -->
      <Button Grid.Row="0"
              Name="CloseButton"
              HorizontalAlignment="Right"
              VerticalAlignment="Top"
              Margin="0,-20,-28,0"
              Width="32" Height="32"
              CornerRadius="16"
              Background="#27272A"
              BorderThickness="0"
              ToolTip.Tip="Close Application"
              Click="OnCloseButtonClick">
        <TextBlock Text="âœ•"
                   Foreground="#A1A1AA"
                   FontSize="14"
                   HorizontalAlignment="Center"
                   VerticalAlignment="Center"/>
      </Button>

      <!-- Baketaã‚¢ã‚¤ã‚³ãƒ³ -->
      <Image Grid.Row="0"
             Source="avares://Baketa/Assets/Icons/baketa-256.png"
             Width="96" Height="96"
             HorizontalAlignment="Center"
             Margin="0,0,0,24"/>

      <!-- Issue #259: çµ±åˆãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
      <StackPanel Grid.Row="1"
                  HorizontalAlignment="Stretch"
                  Margin="20,0">
        <!-- ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        <TextBlock Text="{Binding CurrentStepMessage}"
                   Foreground="#E4E4E7"
                   FontSize="14"
                   HorizontalAlignment="Center"
                   TextWrapping="NoWrap"
                   TextTrimming="CharacterEllipsis"/>
        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
        <ProgressBar Value="{Binding OverallProgress}"
                     IsIndeterminate="{Binding IsIndeterminate}"
                     Minimum="0"
                     Maximum="100"
                     Height="6"
                     Margin="0,12,0,0"
                     Foreground="#3B82F6"
                     Background="#27272A"/>
      </StackPanel>

      <!-- Issue #259: Tipsï¼ˆãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãï¼‰ -->
      <Border Grid.Row="2"
              Background="#27272A"
              CornerRadius="8"
              Margin="0,24,0,0"
              Padding="16,12"
              VerticalAlignment="Center">
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center">
          <TextBlock Text="ðŸ’¡"
                     FontSize="16"
                     Margin="0,0,8,0"
                     VerticalAlignment="Center"/>
          <TransitioningContentControl Content="{Binding CurrentTip}"
                                        HorizontalAlignment="Center"
                                        VerticalAlignment="Center">
            <TransitioningContentControl.PageTransition>
              <CrossFade Duration="0:0:0.5" />
            </TransitioningContentControl.PageTransition>
            <TransitioningContentControl.ContentTemplate>
              <DataTemplate>
                <TextBlock Text="{Binding}"
                           Foreground="#A1A1AA"
                           FontSize="12"
                           TextWrapping="Wrap"
                           MaxWidth="360"
                           TextAlignment="Left"/>
              </DataTemplate>
            </TransitioningContentControl.ContentTemplate>
          </TransitioningContentControl>
        </StackPanel>
      </Border>

      <!-- ã‚¹ãƒšãƒ¼ã‚µãƒ¼ -->
      <Border Grid.Row="3" Height="16"/>

      <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
      <StackPanel Grid.Row="4"
                  Orientation="Vertical"
                  HorizontalAlignment="Center">
        <TextBlock Text="Baketa - Game Translation Overlay"
                   Foreground="#71717A"
                   FontSize="12"
                   HorizontalAlignment="Center"/>
        <TextBlock Text="{Binding VersionText}"
                   Foreground="#52525B"
                   FontSize="10"
                   HorizontalAlignment="Center"
                   Margin="0,4,0,0"/>
      </StackPanel>
    </Grid>
  </Border>
</Window>
