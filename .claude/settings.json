{
  "preferredNotifChannel": "terminal_bell",
  "taskCompletionNotification": true,
  "implementationCheckReminder": true,
  "errorNotificationEnabled": true,
  "permissions": {
    "allow": [
      "Bash(rg*)",
      "Bash(grep*)",
      "Bash(grep -*)",
      "Bash(*grep*)",
      "Bash(find*)",
      "Bash(find -*)",
      "Bash(ls*)",
      "Bash(cat*)",
      "Bash(head*)",
      "Bash(tail*)",
      "Bash(wc*)",
      "Bash(dotnet*)",
      "Bash(git status*)",
      "Bash(git log*)",
      "Bash(git diff*)",
      "Bash(gemini*)",
      "Edit(*)",
      "MultiEdit(*)",
      "Write(*)",
      "Read(*)",
      "Glob(*)",
      "LS(*)",
      "NotebookRead(*)",
      "NotebookEdit(*)"
    ],
    "deny": [
      "Bash(git commit*)",
      "Bash(git push*)",
      "Bash(rm*)",
      "Bash(sudo*)",
      "Bash(npm install*)",
      "Bash(pnpm install*)",
      "Bash(yarn install*)",
      "Read(.env*)",
      "Read(*.key)",
      "Read(*.secret)"
    ]
  },
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'select(.tool_input.file_path | endswith(\".cs\")) | .tool_input.file_path' | xargs -r dotnet format --include"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'select(.tool_input.file_path | test(\"Baketa\\\\.Core/\")) | \"echo [Hook] Core layer file modified: \" + .tool_input.file_path' | sh"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'select(.tool_input.file_path | test(\"tests/.*Tests\\\\.cs$\")) | \"dotnet test --filter \\\"FullyQualifiedName~\" + (.tool_input.file_path | split(\"/\")[-1] | split(\".\")[0]) + \"\\\" --verbosity minimal\"' | sh"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"dotnet test\") and (.output | test(\"Failed:\")) then \"powershell.exe -Command \\\"Write-Host \\\"âš ï¸ ãƒ†ã‚¹ãƒˆå¤±æ•—ã‚’æ¤œå‡ºã—ã¾ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼å†…å®¹ã‚’ç¢ºèªã—ã¦ãã ã•ã„\\\" -ForegroundColor Red\\\"\" else \"\" end' | sh"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'select(.tool_input.file_path | test(\".*\\\\.(cs|csproj)$\")) | \"echo \\\"ğŸ“Š [Stats] $(find . -name \\\"*.cs\\\" -not -path \\\"*/bin/*\\\" -not -path \\\"*/obj/*\\\" | wc -l) C# files, $(git status --porcelain | wc -l) uncommitted changes\\\"\"' | sh"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"^(dotnet build|dotnet test|dotnet run|dotnet format)\") then \"{\\\"decision\\\": \\\"allow\\\", \\\"message\\\": \\\"ğŸš€ dotnetã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™\\\"}\" else \"\" end'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"^(rg|grep|find|ls|cat|head|tail)\") then \"{\\\"decision\\\": \\\"allow\\\", \\\"message\\\": \\\"ğŸ” æ¤œç´¢/è¡¨ç¤ºã‚³ãƒãƒ³ãƒ‰ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¾ã™\\\"}\" else \"\" end'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"^(grep|find) \") then \"{\\\"decision\\\": \\\"suggest\\\", \\\"message\\\": \\\"ğŸ’¡ ææ¡ˆ: ripgrep (rg) ã®æ–¹ãŒ10-50å€é«˜é€Ÿã§ã™ã€‚ä»£ã‚ã‚Šã« rg ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™\\\"}\" else \"\" end'"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.file_path | test(\"(appsettings|Directory\\\\.Build\\\\.props|.*\\\\.csproj)$\") then \"{\\\"decision\\\": \\\"confirm\\\", \\\"message\\\": \\\"âš ï¸ é‡è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ\\\"}\" else \"\" end'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"rm|del|Remove-Item\") then \"{\\\"decision\\\": \\\"confirm\\\", \\\"message\\\": \\\"âš ï¸ ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ã€‚ç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ\\\"}\" else \"\" end'"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "jq -r 'if .tool_input.command | test(\"git add.*\\\\.(cs|csproj|json|md)$\") then \"dotnet build --verbosity minimal 2>&1 | grep -q \\\"Build succeeded\\\" && echo \\\"{\\\\\\\"decision\\\\\\\": \\\\\\\"allow\\\\\\\", \\\\\\\"message\\\\\\\": \\\\\\\"âœ… ãƒ“ãƒ«ãƒ‰æˆåŠŸã€‚ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã™\\\\\\\"}\\\" || echo \\\"{\\\\\\\"decision\\\\\\\": \\\\\\\"block\\\\\\\", \\\\\\\"reason\\\\\\\": \\\\\\\"âŒ ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™ã€‚ä¿®æ­£ã—ã¦ãã ã•ã„\\\\\\\"}\\\"\" else \"\" end' | sh"
          }
        ]
      },
      {
        "matcher": "WebSearch",
        "hooks": [
          {
            "type": "command",
            "command": "echo '{\"decision\": \"block\", \"reason\": \"Use Bash(gemini -p \\\"WebSearch: <query>\\\") instead.\"}'"
          }
        ]
      }
    ],
    "Notification": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "powershell.exe -Command \"$host.UI.RawUI.WindowTitle = 'Claude Code - Notification'; Write-Host 'ğŸ”” Claude Code: é€šçŸ¥ãŒã‚ã‚Šã¾ã™' -ForegroundColor Yellow\""
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "powershell.exe -Command \"Write-Host 'âœ… Claude Code: ã‚¿ã‚¹ã‚¯ãŒå®Œäº†ã—ã¾ã—ãŸ' -ForegroundColor Green; if (Test-Path 'E:\\dev\\Baketa\\bin\\Debug') { Write-Host 'ğŸ’¡ ãƒ’ãƒ³ãƒˆ: dotnet run --project Baketa.UI ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã§ãã¾ã™' -ForegroundColor Cyan }\""
          }
        ]
      }
    ]
  }
}