# Issue #170: ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢å®Ÿè£…

## ğŸ“‹ æ¦‚è¦
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«è¡¨ç¤ºã™ã‚‹ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’å®Ÿè£…ã—ã€åˆæœŸåŒ–å‡¦ç†ã®é€²æ—ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¦–è¦šçš„ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã—ã¾ã™ã€‚

## ğŸ¯ ç›®çš„
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã®ä½“é¨“å‘ä¸Š
- åˆæœŸåŒ–å‡¦ç†ã®é€²æ—å¯è¦–åŒ–
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å¾…æ©Ÿæ™‚é–“ã«å¯¾ã™ã‚‹ä¸å®‰è»½æ¸›

## ğŸ“¦ Epic
**Epic 3: UI/UXã®åˆ·æ–°** (#166 - #173)

## ğŸ”— ä¾å­˜é–¢ä¿‚
- **Blocks**: ãªã—
- **Blocked by**: ãªã—
- **Related**: #171 (ãƒ¡ã‚¤ãƒ³ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦UIåˆ·æ–°)

## ğŸ“ è¦ä»¶

### æ©Ÿèƒ½è¦ä»¶
1. **ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢è¡¨ç¤º**
   - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ç›´å¾Œã«å…¨ç”»é¢ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¡¨ç¤º
   - åŠé€æ˜èƒŒæ™¯ (`#000000` 80% opacity)
   - ä¸­å¤®ã«Baketaãƒ­ã‚´ã¨é€²æ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼

2. **é€²æ—ã‚¹ãƒ†ãƒƒãƒ—è¡¨ç¤º**
   - åˆæœŸåŒ–å‡¦ç†ã®å„ã‚¹ãƒ†ãƒƒãƒ—ã‚’è¡¨ç¤º:
     - "ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã„ã¾ã™..."
     - "OCRãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™..."
     - "ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–ã—ã¦ã„ã¾ã™..."
     - "UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ã„ã¾ã™..."
   - å„ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†æ™‚ã«ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ (âœ“) ã‚’è¡¨ç¤º

3. **ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³**
   - ã‚¹ãƒ”ãƒŠãƒ¼/ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ (å›è»¢ã™ã‚‹å††å½¢ãªã©)
   - ã‚¹ãƒ†ãƒƒãƒ—åˆ‡ã‚Šæ›¿ãˆæ™‚ã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆ (0.3ç§’)
   - å®Œäº†å¾Œã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆ (0.5ç§’) â†’ MainWindowè¡¨ç¤º

4. **å®Œäº†åˆ¤å®š**
   - å…¨ã¦ã®åˆæœŸåŒ–å‡¦ç†ãŒå®Œäº†ã—ãŸã‚‰MainWindowã¸é·ç§»
   - ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã¯ã‚¨ãƒ©ãƒ¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºå¾Œã«çµ‚äº†

### éæ©Ÿèƒ½è¦ä»¶
1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢è¡¨ç¤ºã¾ã§ã®æ™‚é–“: <500ms
   - UIã‚¹ãƒ¬ãƒƒãƒ‰ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãªã— (ã™ã¹ã¦éåŒæœŸå‡¦ç†)

2. **UIãƒ‡ã‚¶ã‚¤ãƒ³**
   - ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒãƒ™ãƒ¼ã‚¹ (èƒŒæ™¯: `#1E1E1E`)
   - ãƒ­ã‚´: ä¸­å¤®é…ç½®ã€200x200px
   - ãƒ†ã‚­ã‚¹ãƒˆ: `#FFFFFF`ã€16pxã€Meiryo UI
   - ã‚¹ãƒ”ãƒŠãƒ¼: Primary color (`#007ACC`)

## ğŸ—ï¸ å®Ÿè£…æ–¹é‡

### 1. LoadingWindow.axaml
```xml
<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="Baketa.UI.Views.LoadingWindow"
        Title="Baketa - èµ·å‹•ä¸­..."
        Width="600" Height="400"
        WindowStartupLocation="CenterScreen"
        CanResize="False"
        ShowInTaskbar="False"
        Background="#CC000000">

    <Grid>
        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="30">
            <!-- Baketaãƒ­ã‚´ -->
            <Image Source="/Assets/baketa-logo.png" Width="200" Height="200" />

            <!-- ã‚¹ãƒ”ãƒŠãƒ¼ -->
            <ProgressBar IsIndeterminate="True" Width="300" />

            <!-- é€²æ—ã‚¹ãƒ†ãƒƒãƒ— -->
            <ItemsControl ItemsSource="{Binding InitializationSteps}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal" Spacing="10" Margin="0,5">
                            <TextBlock Text="{Binding Status}"
                                       FontSize="14"
                                       Foreground="#FFFFFF"
                                       Width="30" />
                            <TextBlock Text="{Binding Message}"
                                       FontSize="14"
                                       Foreground="#FFFFFF" />
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </StackPanel>
    </Grid>
</Window>
```

### 2. LoadingViewModel.cs
```csharp
namespace Baketa.UI.ViewModels;

public class LoadingViewModel : ViewModelBase
{
    private readonly IApplicationInitializer _initializer;

    public ObservableCollection<InitializationStep> InitializationSteps { get; } = new();

    public LoadingViewModel(IApplicationInitializer initializer)
    {
        _initializer = initializer;
        _initializer.ProgressChanged += OnProgressChanged;
    }

    public async Task InitializeAsync()
    {
        try
        {
            await _initializer.InitializeAsync();
        }
        catch (Exception ex)
        {
            // ã‚¨ãƒ©ãƒ¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤º
            await ShowErrorDialogAsync(ex.Message);
            Environment.Exit(1);
        }
    }

    private void OnProgressChanged(object? sender, InitializationProgressEventArgs e)
    {
        var step = InitializationSteps.FirstOrDefault(s => s.Id == e.StepId);
        if (step != null)
        {
            step.Status = e.IsCompleted ? "âœ“" : "...";
        }
    }
}

public class InitializationStep : ReactiveObject
{
    [Reactive] public string Id { get; set; } = string.Empty;
    [Reactive] public string Message { get; set; } = string.Empty;
    [Reactive] public string Status { get; set; } = "...";
}
```

### 3. IApplicationInitializer Interface
```csharp
namespace Baketa.Core.Abstractions.Services;

public interface IApplicationInitializer
{
    event EventHandler<InitializationProgressEventArgs> ProgressChanged;
    Task InitializeAsync(CancellationToken cancellationToken = default);
}

public class InitializationProgressEventArgs : EventArgs
{
    public required string StepId { get; init; }
    public required string Message { get; init; }
    public bool IsCompleted { get; init; }
}
```

### 4. ApplicationInitializer.cs
```csharp
namespace Baketa.Application.Services;

public class ApplicationInitializer : IApplicationInitializer
{
    private readonly IServiceProvider _serviceProvider;
    public event EventHandler<InitializationProgressEventArgs>? ProgressChanged;

    public async Task InitializeAsync(CancellationToken cancellationToken = default)
    {
        // Step 1: ä¾å­˜é–¢ä¿‚è§£æ±º
        ReportProgress("resolve_dependencies", "ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã„ã¾ã™...", false);
        await ResolveDependenciesAsync(cancellationToken);
        ReportProgress("resolve_dependencies", "ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã„ã¾ã™...", true);

        // Step 2: OCRãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿
        ReportProgress("load_ocr", "OCRãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...", false);
        var ocrEngine = _serviceProvider.GetRequiredService<IOcrEngine>();
        await ocrEngine.InitializeAsync(cancellationToken);
        ReportProgress("load_ocr", "OCRãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...", true);

        // Step 3: ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³åˆæœŸåŒ–
        ReportProgress("init_translation", "ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–ã—ã¦ã„ã¾ã™...", false);
        var translationService = _serviceProvider.GetRequiredService<ITranslationService>();
        await translationService.WarmUpAsync(cancellationToken);
        ReportProgress("init_translation", "ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–ã—ã¦ã„ã¾ã™...", true);

        // Step 4: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆæº–å‚™
        ReportProgress("prepare_ui", "UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ã„ã¾ã™...", false);
        await PrepareUIComponentsAsync(cancellationToken);
        ReportProgress("prepare_ui", "UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ã„ã¾ã™...", true);
    }

    private void ReportProgress(string stepId, string message, bool isCompleted)
    {
        ProgressChanged?.Invoke(this, new InitializationProgressEventArgs
        {
            StepId = stepId,
            Message = message,
            IsCompleted = isCompleted
        });
    }
}
```

### 5. App.axaml.cs çµ±åˆ
```csharp
public override void OnFrameworkInitializationCompleted()
{
    if (ApplicationLifetime is IClassicDesktopStyleApplicationLifetime desktop)
    {
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã‚’è¡¨ç¤º
        var loadingWindow = new LoadingWindow
        {
            DataContext = _serviceProvider.GetRequiredService<LoadingViewModel>()
        };

        desktop.MainWindow = loadingWindow;
        loadingWindow.Show();

        // ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§åˆæœŸåŒ–
        _ = Task.Run(async () =>
        {
            await ((LoadingViewModel)loadingWindow.DataContext).InitializeAsync();

            // åˆæœŸåŒ–å®Œäº†å¾Œã€MainWindowã¸é·ç§»
            await Dispatcher.UIThread.InvokeAsync(() =>
            {
                var mainWindow = new MainWindow
                {
                    DataContext = _serviceProvider.GetRequiredService<MainViewModel>()
                };

                desktop.MainWindow = mainWindow;
                loadingWindow.Close();
                mainWindow.Show();
            });
        });
    }

    base.OnFrameworkInitializationCompleted();
}
```

## âœ… å—ã‘å…¥ã‚ŒåŸºæº–

### æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] 4ã¤ã®åˆæœŸåŒ–ã‚¹ãƒ†ãƒƒãƒ—ãŒé †ç•ªã«å®Ÿè¡Œãƒ»è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å„ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†æ™‚ã«ãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ (âœ“) ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å…¨ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†å¾Œã€MainWindowã¸é·ç§»ã™ã‚‹
- [ ] åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] **é€²è¡ŒçŠ¶æ³ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹**
- [ ] **ãƒªãƒˆãƒ©ã‚¤å¯èƒ½ãªã‚¨ãƒ©ãƒ¼ã§è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ãŒå®Ÿè¡Œã•ã‚Œã‚‹**
- [ ] **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé©åˆ‡ã«åˆ†é¡ã•ã‚Œã‚‹** (ãƒ•ã‚¡ã‚¤ãƒ«ä¸è¶³ã€æ¨©é™ã‚¨ãƒ©ãƒ¼ç­‰)

### UIãƒ†ã‚¹ãƒˆ
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãŒä»•æ§˜é€šã‚Š
- [ ] ã‚¹ãƒ”ãƒŠãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] ã‚¹ãƒ†ãƒƒãƒ—åˆ‡ã‚Šæ›¿ãˆæ™‚ã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆãŒæ»‘ã‚‰ã‹
- [ ] å®Œäº†å¾Œã®ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] **ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ãŒæ­£ç¢ºã«æ›´æ–°ã•ã‚Œã‚‹**

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢è¡¨ç¤ºã¾ã§ã®æ™‚é–“ãŒ500msä»¥å†…
- [ ] UIã‚¹ãƒ¬ãƒƒãƒ‰ãŒãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œãªã„
- [ ] **å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œæ™‚é–“ãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹**
- [ ] **ç·åˆæœŸåŒ–æ™‚é–“ãŒãƒ­ã‚°ã«è¨˜éŒ²ã•ã‚Œã‚‹**

### å˜ä½“ãƒ†ã‚¹ãƒˆ
```csharp
public class ApplicationInitializerTests
{
    [Fact]
    public async Task InitializeAsync_æˆåŠŸæ™‚_å…¨ã‚¹ãƒ†ãƒƒãƒ—ã‚’é †ç•ªã«å®Ÿè¡Œ()
    {
        // Arrange
        var initializer = new ApplicationInitializer(_serviceProvider);
        var progressEvents = new List<InitializationProgressEventArgs>();
        initializer.ProgressChanged += (s, e) => progressEvents.Add(e);

        // Act
        await initializer.InitializeAsync();

        // Assert
        progressEvents.Should().HaveCount(8); // 4ã‚¹ãƒ†ãƒƒãƒ— Ã— 2 (é–‹å§‹/å®Œäº†)
        progressEvents.Where(e => e.IsCompleted).Should().HaveCount(4);
    }

    [Fact]
    public async Task InitializeAsync_OCRåˆæœŸåŒ–å¤±æ•—æ™‚_ä¾‹å¤–ã‚’ã‚¹ãƒ­ãƒ¼()
    {
        // Arrange
        _mockOcrEngine.Setup(x => x.InitializeAsync(It.IsAny<CancellationToken>()))
                      .ThrowsAsync(new Exception("OCR initialization failed"));

        // Act & Assert
        await Assert.ThrowsAsync<Exception>(() => _initializer.InitializeAsync());
    }
}
```

## ğŸ”§ è¿½åŠ æ©Ÿèƒ½ï¼ˆå¼·åŒ–ç‰ˆï¼‰

### 1. é€²è¡ŒçŠ¶æ³ã®è©³ç´°åŒ–
```csharp
public class InitializationStep : ReactiveObject
{
    [Reactive] public string Id { get; set; } = string.Empty;
    [Reactive] public string Message { get; set; } = string.Empty;
    [Reactive] public string Status { get; set; } = "...";
    [Reactive] public int Progress { get; set; } = 0; // 0-100%
    [Reactive] public bool IsCompleted { get; set; }
    [Reactive] public bool HasError { get; set; }
    [Reactive] public string? ErrorMessage { get; set; }
}

// LoadingWindow.axamlã«ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼è¿½åŠ 
<ProgressBar Value="{Binding CurrentProgress}"
             Maximum="100"
             Width="300"
             Height="8"
             Foreground="#007ACC" />
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
```csharp
public class ApplicationInitializer : IApplicationInitializer
{
    private readonly ILogger<ApplicationInitializer> _logger;
    private readonly Stopwatch _stopwatch = new();

    public async Task InitializeAsync(CancellationToken cancellationToken = default)
    {
        _stopwatch.Start();

        await ExecuteStepAsync("resolve_dependencies", "ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦ã„ã¾ã™...",
            async () => await ResolveDependenciesAsync(cancellationToken), cancellationToken);

        await ExecuteStepAsync("load_ocr", "OCRãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...",
            async () => await InitializeOcrAsync(cancellationToken), cancellationToken);

        await ExecuteStepAsync("init_translation", "ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³ã‚’åˆæœŸåŒ–ã—ã¦ã„ã¾ã™...",
            async () => await InitializeTranslationAsync(cancellationToken), cancellationToken);

        await ExecuteStepAsync("prepare_ui", "UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æº–å‚™ã—ã¦ã„ã¾ã™...",
            async () => await PrepareUIComponentsAsync(cancellationToken), cancellationToken);

        _stopwatch.Stop();
        _logger.LogInformation("ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–å®Œäº†: {ElapsedMs}ms", _stopwatch.ElapsedMilliseconds);
    }

    private async Task ExecuteStepAsync(string stepId, string message, Func<Task> action, CancellationToken cancellationToken)
    {
        var stepStopwatch = Stopwatch.StartNew();
        ReportProgress(stepId, message, false, 0);

        try
        {
            await action();
            stepStopwatch.Stop();

            _logger.LogInformation("ã‚¹ãƒ†ãƒƒãƒ—å®Œäº†: {StepId} ({ElapsedMs}ms)", stepId, stepStopwatch.ElapsedMilliseconds);
            ReportProgress(stepId, message, true, 100);
        }
        catch (Exception ex)
        {
            stepStopwatch.Stop();
            _logger.LogError(ex, "ã‚¹ãƒ†ãƒƒãƒ—å¤±æ•—: {StepId} ({ElapsedMs}ms)", stepId, stepStopwatch.ElapsedMilliseconds);
            throw new InitializationException(stepId, message, ex);
        }
    }
}
```

### 3. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
```csharp
public class InitializationException : Exception
{
    public string StepId { get; }
    public string StepMessage { get; }
    public InitializationErrorType ErrorType { get; }

    public InitializationException(string stepId, string stepMessage, Exception innerException)
        : base($"åˆæœŸåŒ–ã‚¹ãƒ†ãƒƒãƒ— '{stepMessage}' ãŒå¤±æ•—ã—ã¾ã—ãŸ", innerException)
    {
        StepId = stepId;
        StepMessage = stepMessage;
        ErrorType = ClassifyError(innerException);
    }

    private static InitializationErrorType ClassifyError(Exception ex)
    {
        return ex switch
        {
            FileNotFoundException => InitializationErrorType.MissingFile,
            UnauthorizedAccessException => InitializationErrorType.PermissionDenied,
            TimeoutException => InitializationErrorType.Timeout,
            OutOfMemoryException => InitializationErrorType.InsufficientMemory,
            _ => InitializationErrorType.Unknown
        };
    }
}

public enum InitializationErrorType
{
    Unknown,
    MissingFile,
    PermissionDenied,
    Timeout,
    InsufficientMemory,
    NetworkError
}

// LoadingViewModel.csã§ã‚¨ãƒ©ãƒ¼å‡¦ç†
private async Task InitializeAsync()
{
    try
    {
        await _initializer.InitializeAsync();
    }
    catch (InitializationException ex)
    {
        var errorMessage = ex.ErrorType switch
        {
            InitializationErrorType.MissingFile => "å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚",
            InitializationErrorType.PermissionDenied => "ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚",
            InitializationErrorType.Timeout => "åˆæœŸåŒ–ãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",
            InitializationErrorType.InsufficientMemory => "ãƒ¡ãƒ¢ãƒªãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚ä»–ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ã¦ãã ã•ã„ã€‚",
            _ => $"åˆæœŸåŒ–ã«å¤±æ•—ã—ã¾ã—ãŸ: {ex.Message}"
        };

        await ShowErrorDialogAsync(ex.StepMessage, errorMessage, ex.InnerException?.Message);
        Environment.Exit(1);
    }
}
```

### 4. ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯
```csharp
public class ApplicationInitializer : IApplicationInitializer
{
    private async Task ExecuteStepWithRetryAsync(string stepId, string message, Func<Task> action,
        CancellationToken cancellationToken, int maxRetries = 3)
    {
        for (int attempt = 1; attempt <= maxRetries; attempt++)
        {
            try
            {
                ReportProgress(stepId, $"{message} (è©¦è¡Œ {attempt}/{maxRetries})", false, 0);
                await action();
                ReportProgress(stepId, message, true, 100);
                return;
            }
            catch (Exception ex) when (attempt < maxRetries && IsTransientError(ex))
            {
                _logger.LogWarning(ex, "ã‚¹ãƒ†ãƒƒãƒ— {StepId} ãŒå¤±æ•—ã—ã¾ã—ãŸã€‚ãƒªãƒˆãƒ©ã‚¤ã—ã¾ã™... ({Attempt}/{MaxRetries})",
                    stepId, attempt, maxRetries);

                await Task.Delay(TimeSpan.FromSeconds(Math.Pow(2, attempt)), cancellationToken);
            }
        }

        // æœ€çµ‚è©¦è¡Œ
        await action();
    }

    private static bool IsTransientError(Exception ex)
    {
        return ex is TimeoutException or IOException or HttpRequestException;
    }
}
```

## ğŸ“Š è¦‹ç©ã‚‚ã‚Š
- **ä½œæ¥­æ™‚é–“**: 10æ™‚é–“ï¼ˆã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–ã«ã‚ˆã‚Š+2æ™‚é–“ï¼‰
- **å„ªå…ˆåº¦**: ğŸŸ  High
- **ãƒªã‚¹ã‚¯**: ğŸŸ¡ Medium (éåŒæœŸå‡¦ç†ã®è¤‡é›‘ã•)

## ğŸ“Œ å‚™è€ƒ
- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ã¯åˆå›èµ·å‹•æ™‚ã®ã¿è¡¨ç¤º (2å›ç›®ä»¥é™ã¯è¨­å®šã§ç„¡åŠ¹åŒ–å¯èƒ½)
- å„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œæ™‚é–“ã¯ãƒ­ã‚°ã«è¨˜éŒ²ã—ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æã«æ´»ç”¨
- ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ã¯ä¸è¦ (ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†)

---

**ä½œæˆæ—¥**: 2025-11-18
**æœ€çµ‚æ›´æ–°**: 2025-11-18
**ä½œæˆè€…**: Claude Code

---

## æ›´æ–°å±¥æ­´

### 2025-11-18: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–å¼·åŒ–
- **å¤‰æ›´ç†ç”±**: ã‚ˆã‚Šå …ç‰¢ãªåˆæœŸåŒ–å‡¦ç†ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å‘ä¸Š
- **è¿½åŠ å†…å®¹**:
  - é€²è¡ŒçŠ¶æ³ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸è¡¨ç¤º
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ï¼ˆå„ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œæ™‚é–“æ¸¬å®šï¼‰
  - è©³ç´°ãªã‚¨ãƒ©ãƒ¼åˆ†é¡ï¼ˆ5ç¨®é¡ã®ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ï¼‰
  - ãƒªãƒˆãƒ©ã‚¤ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆä¸€æ™‚çš„ãªã‚¨ãƒ©ãƒ¼ã§æœ€å¤§3å›ãƒªãƒˆãƒ©ã‚¤ï¼‰
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **ä½œæ¥­æ™‚é–“å¤‰æ›´**: 8æ™‚é–“ â†’ 10æ™‚é–“
