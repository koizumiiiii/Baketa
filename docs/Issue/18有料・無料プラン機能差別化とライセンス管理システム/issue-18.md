# Issue 18: 有料・無料プラン機能差別化とライセンス管理システム

## 概要
Baketaアプリケーションに有料プランと無料プランの機能差別化を実装し、それを管理するためのライセンス管理システムを構築します。有料プランではクラウドAI翻訳（Google Gemini/OpenAI）を提供し、無料プランではローカル翻訳モデルを提供することで、ユーザーニーズに合わせた選択肢を提供します。

## 目的・理由
1. **ビジネスモデルの確立**: 基本機能を無料で提供しつつ、高品質な翻訳機能を有料プランとして提供することで持続可能なビジネスモデルを構築する
2. **ユーザー選択肢の提供**: 異なるニーズや予算を持つユーザーに適切な選択肢を提供する
3. **オフライン利用の保証**: 無料プランでもオフライン環境で基本的な翻訳機能を利用可能にする
4. **プレミアム機能の明確化**: 有料プランの価値を明確にする機能差別化を実現する

## 詳細
- 有料プランと無料プランの機能差別化の実装
- ライセンスキー検証システムの構築
- プラン切り替えUIの実装
- トライアル機能の実装

## タスク分解
- [ ] 有料・無料プラン機能定義
  - [ ] プラン別翻訳エンジン切り替え機能の実装
  - [ ] 機能制限設定の実装
  - [ ] 翻訳エンジン自動選択ロジックの実装
  - [ ] プラン状態の保持と読み込み機能の実装
- [ ] ライセンス管理システム
  - [ ] ライセンスキー検証ロジックの実装
  - [ ] 暗号化されたライセンス情報の保存機能
  - [ ] 定期的な再検証機能（7日ごと）
  - [ ] オフライン利用のための猶予期間（30日）実装
- [ ] プラン切り替えUI
  - [ ] 現在のプラン状態表示画面の実装
  - [ ] ライセンスキー入力画面の実装
  - [ ] アップグレード案内表示の実装
  - [ ] プラン切り替え時の機能変更処理の実装
- [ ] トライアル機能
  - [ ] 14日間無料トライアル機能の実装
  - [ ] トライアル期間カウントダウン表示の実装
  - [ ] トライアル終了時の通知機能の実装
  - [ ] トライアル状態の保存と読み込み機能の実装
- [ ] テストとドキュメント
  - [ ] ライセンス検証のテスト実装
  - [ ] オフライン猶予期間のテスト実装
  - [ ] UIフローのテスト実装
  - [ ] ユーザーマニュアルの作成

## 実装上の注意点
- ライセンス情報は安全な方法で暗号化して保存する
- オフライン利用のためのグレースフル認証失敗処理を実装する
- ユーザー体験を損なわない形でプラン制限を実装する
- トライアル期間は一度のみ付与され、複数回の利用を防止する仕組みを実装する
- 有料プランと無料プランの切り替えはシームレスに行われるようにする
- プラン状態変更はIEventAggregatorを通じて他のコンポーネントに通知する

## 関連Issue/参考
- 関連: #9 翻訳システム基盤の構築
- 関連: #15 ONNX翻訳エンジン統合
- 関連: #19 クラウドAI翻訳連携（有料プラン向け）
- 関連: #20 ローカル翻訳モデル最適化（無料プラン向け）
- 参照: E:\dev\Baketa\docs\baketa-ai-translation-requirements.md (1.2 機能の位置づけ)
- 参照: E:\dev\Baketa\docs\baketa-ai-translation-requirements.md (2. 有料プランと無料プランの機能差別化)
- 参照: E:\dev\Baketa\docs\baketa-ai-translation-requirements.md (4. プラン管理と認証)

## マイルストーン
マイルストーン4: 機能拡張と最適化

## ラベル
- `type: feature`
- `priority: high`
- `component: translation`
- `business: monetization`
