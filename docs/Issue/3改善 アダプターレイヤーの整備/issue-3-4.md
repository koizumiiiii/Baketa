# 改善: アダプターファクトリーと依存性注入の整備

## 概要
アダプターの生成を管理するファクトリーの実装と、依存性注入(DI)を通じたアダプターの登録を整備します。

## 目的・理由
アダプターの生成と管理を集中化することで、コード整理と保守性の向上を図ります。また、依存性注入を通じて適切なアダプターを提供することで、レイヤー間の疎結合化を促進します。

## 詳細
- アダプター生成用ファクトリーの設計と実装
- DI登録拡張メソッドの実装
- アダプターのライフタイム管理ポリシーの確立
- アダプターの条件付き登録（プラットフォーム検出）

## タスク分解
- [ ] アダプターファクトリーの実装
  - [ ] `IPlatformAdapterFactory`インターフェースの設計
  - [ ] `WindowsAdapterFactory`の実装
  - [ ] 各種アダプター生成メソッドの実装
- [ ] DIでのアダプター登録機能の整備
  - [ ] `AddWindowsAdapters()`拡張メソッドの作成
  - [ ] 適切なライフタイム設定
  - [ ] 条件付き登録の実装
- [ ] アダプター設定機能の実装
  - [ ] 必要な設定クラスの作成
  - [ ] オプション注入の実装
- [ ] アダプター診断機能の実装（開発用）
  - [ ] 登録済みアダプターの一覧取得
  - [ ] アダプター動作確認機能
- [ ] 単体テストの作成

## 関連Issue/参考
- 親Issue: #3 改善: アダプターレイヤーの整備
- 関連: #2 改善: 依存性注入モジュール構造の実装
- 依存: #3.1 改善: 画像アダプターレイヤーの実装
- 依存: #3.2 改善: キャプチャアダプターレイヤーの実装
- 依存: #3.3 改善: ウィンドウマネージャーアダプターの実装
- 参照: E:\dev\Baketa\docs\3-architecture\improved-architecture.md (5.4 アダプターの実装例)
- 参照: E:\dev\Baketa\docs\2-development\guidelines\dependency-injection.md (5.3 プラットフォーム依存の条件付き登録)

## マイルストーン
マイルストーン1: アーキテクチャ基盤の改善

## ラベル
- `type: refactor`
- `priority: medium`
- `component: core`
