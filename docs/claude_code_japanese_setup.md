# Claude Code 日本語回答設定ガイド

## 基本設定

Claude Codeで**常に日本語回答**を得るための設定と使用方法です。

## 設定ファイルでの言語指定

### 1. .claude/instructions.md での指定
```markdown
### **言語指定 / Language Specification**
**ALL RESPONSES MUST BE IN JAPANESE / すべての回答は日本語で行うこと**
```

### 2. .claude/project.json での指定
```json
{
  "response_language": {
    "primary": "japanese",
    "requirement": "ALL responses must be in Japanese"
  }
}
```

## Claude Code コマンドでの日本語指定

### 基本的な使用方法

#### ✅ 推奨：明示的な日本語指定
```bash
# 基本パターン
claude "日本語で回答してください。このエラーを修正して: [エラー内容]"

# ファイル修正
claude "日本語で説明しながら、このファイルのエラーを根本的に修正してください" --file error_log.txt

# 新機能実装
claude "日本語で手順を説明しながら、新しいOCRフィルターを実装してください"
```

#### ✅ プロンプトテンプレート活用
```bash
# テンプレート化した指示
claude "【日本語回答必須】以下の要件でコードを実装してください：
- 要件: [具体的な要件]
- 制約: Baketaプロジェクトのアーキテクチャ準拠
- 回答: 日本語での詳細説明付き"
```

### 実践的な使用例

#### コードエラー修正
```bash
claude "日本語で説明してください。以下のIDE0060警告を根本的に解決してください：
E:\dev\Baketa\Baketa.Infrastructure\Capture\DifferenceDetection\DifferenceVisualizerTool.cs(221,45): warning IDE0060: Remove unused parameter"
```

#### 新機能実装
```bash
claude "日本語で手順を説明しながら、以下を実装してください：
1. ゲーム固有フォント用のOCRフィルター
2. Baketa.Infrastructure.Imaging.Filtersに配置
3. 単体テストも含めて実装"
```

#### リファクタリング
```bash
claude "日本語で説明しながら、このクラスをC# 12の現代的なパターンにリファクタリングしてください" --file OldService.cs
```

## 確実に日本語回答を得るためのテクニック

### 1. プロンプトの先頭で言語指定
```bash
claude "【重要：回答は必ず日本語で】エラーを修正してください"
```

### 2. 説明を求める指示を追加
```bash
claude "日本語で詳しく説明しながら、コードを修正してください"
```

### 3. 段階的な説明を要求
```bash
claude "以下を日本語で段階的に説明してください：
1. 問題の根本原因
2. 解決策の選択理由  
3. 実装手順
4. テスト方法"
```

## よくある問題と対策

### 問題1: 英語で回答される
**対策**: プロンプトの先頭に明示的な日本語指定を追加
```bash
claude "【日本語必須】" + "具体的な指示"
```

### 問題2: コメントも日本語になってしまう
**対策**: コメント言語を明示的に指定
```bash
claude "コードコメントは英語、説明は日本語で実装してください"
```

### 問題3: 技術用語が分かりにくい
**対策**: 英語併記を要求
```bash
claude "技術用語は英語併記（英語/日本語）で説明してください"
```

## Baketa プロジェクト専用テンプレート

### エラー修正テンプレート
```bash
claude "【Baketa専用・日本語回答】
以下のエラー/警告を根本的に修正してください：
[エラー内容]

要求:
1. 根本原因の分析（日本語）
2. Baketaアーキテクチャ準拠の解決策
3. 修正コード（英語コメント、日本語説明）
4. 類似問題の予防策"
```

### 新機能実装テンプレート
```bash
claude "【Baketa専用・日本語回答】
以下の新機能を実装してください：
[機能詳細]

要求:
1. アーキテクチャ設計（日本語説明）
2. インターフェース定義
3. 実装コード（C# 12準拠）
4. 単体テスト
5. DIモジュール登録"
```

### リファクタリングテンプレート
```bash
claude "【Baketa専用・日本語回答】
以下のファイルをリファクタリングしてください：
[ファイル名]

要求:
1. 現在の問題点分析（日本語）
2. C# 12/.NET 8.0への更新
3. Clean Architecture準拠
4. パフォーマンス改善
5. テスト可能性向上"
```

### コードレビューテンプレート
```bash
claude "【Baketa専用・日本語回答】
以下のコードをレビューしてください：
[コード]

チェック項目:
1. Baketaコーディング規約準拠
2. 根本原因解決アプローチ
3. パフォーマンス考慮
4. セキュリティ考慮
5. 改善提案（日本語）"
```

## エラーログファイル使用時の指示

### ファイル指定での日本語回答
```bash
# ビルドエラー修正
claude "【日本語必須】このビルドエラーログの全ての問題を根本的に解決してください" --file build_errors.txt

# テスト失敗修正  
claude "【日本語必須】このテスト失敗ログを分析し、失敗の根本原因を解決してください" --file test_failures.txt

# 警告一括修正
claude "【日本語必須】この警告ログの全項目を、Baketaプロジェクトの規約に従って修正してください" --file warnings.txt
```

## 設定確認方法

### 1. テスト用コマンド
```bash
# 設定が正しく動作するかテスト
claude "【テスト】日本語で回答してください。現在の時刻を教えてください。"
```

### 2. 設定ファイル確認
```bash
# 設定ファイルの内容確認
cat .claude/instructions.md | grep -A 5 "言語指定"
cat .claude/project.json | grep -A 5 "response_language"
```

## 緊急時の対処法

### Claude Codeが英語で回答してしまう場合

#### 即座の対処
```bash
# 再度明示的に指定
claude "Please respond in Japanese. 日本語で回答してください。[元の指示を再度]"
```

#### 設定リセット
```bash
# 設定ファイルの再読み込み確認
cd E:\dev\Baketa
cat .claude/instructions.md
```

#### 代替手段
```bash
# より明示的なプロンプト
claude "I need you to respond in Japanese language only. 以下の作業を日本語で実行してください: [具体的指示]"
```

## 最適化のポイント

### 1. 一貫性の維持
- 常に同じテンプレートパターンを使用
- プロジェクト固有の用語を統一
- 日本語説明の品質を維持

### 2. 効率性の向上  
- よく使う指示はスクリプト化
- エラーパターン別のテンプレート準備
- 段階的な作業指示の標準化

### 3. 品質保証
- 回答の日本語品質確認
- 技術用語の統一性確認
- コード品質とのバランス維持

この設定とテンプレートにより、Claude Codeから常に高品質な日本語回答を得ることができます。