name = "baketa-relay"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# KV Namespace for session storage
# Create with: wrangler kv:namespace create "SESSIONS"
# Then update the id below with the returned namespace ID
kv_namespaces = [
  { binding = "SESSIONS", id = "7fdcdf963f8649578fe1ccaadaa74ea8" }
]

# Environment variables (set via Cloudflare dashboard or wrangler secret)
# PATREON_CLIENT_ID - Patreon OAuth Client ID (set via dashboard)
# PATREON_CLIENT_SECRET - Patreon OAuth Client Secret (use wrangler secret)
# API_KEY - Client authentication key (set via dashboard)
# ALLOWED_ORIGINS - Comma-separated list of allowed origins

[vars]
ALLOWED_ORIGINS = "*"

# Note: Secrets should be set via wrangler secret:
# wrangler secret put PATREON_CLIENT_ID
# wrangler secret put PATREON_CLIENT_SECRET
# wrangler secret put API_KEY
# wrangler secret put GEMINI_API_KEY  # Cloud AI翻訳用

# Optional: Gemini model name (default: gemini-2.0-flash-exp)
# Set via dashboard or: wrangler secret put GEMINI_MODEL

# Supabase (プロモーションコード検証用)
# wrangler secret put SUPABASE_URL        # https://xxxxx.supabase.co
# wrangler secret put SUPABASE_SERVICE_KEY # service_roleキー（Supabase Console → Settings → API）

# [Issue #287] JWT認証
# wrangler secret put JWT_SECRET          # JWT署名用シークレット（32バイト以上推奨）
